<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca Digital - Um País Muitas Crenças</title>
    <link rel="manifest" href="/manifest.json">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Folhas de Estilo -->
    <link rel="stylesheet" href="Um País Muitas Crenças.css"> <!-- Estilos Globais -->
    <link rel="stylesheet" href="menu.css"> <!-- Estilos do Menu -->
    <link rel="stylesheet" href="biblioteca.css"> <!-- Estilos da Página -->

    <!-- Google tag (gtag.js) --> 
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VJDQ8Z1NQG"></script> 
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-VJDQ8Z1NQG');
    </script>
</head>
<body>
    <!-- Menu Injetado aqui -->

    <!-- Header -->
    <header class="biblioteca-header">
        <div class="container">
            <h1><i class="fas fa-book-open"></i> Biblioteca Digital</h1>
            <p class="subtitle">Explore um acervo curado de livros, artigos e recursos sobre a paisagem religiosa de Moçambique.</p>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="container">
        <section class="library-section">
            <div class="library-controls">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Pesquisar por título, autor ou descrição...">
                    <button id="clearSearch" class="clear-btn" title="Limpar busca"><i class="fas fa-times"></i></button>
                </div>
                 <div class="filters">
                    <button class="filter-btn active" data-filter="all"><i class="fas fa-book"></i> Todos</button>
                    <button class="filter-btn" data-filter="cristianismo"><i class="fas fa-church"></i> Cristianismo</button>
                    <button class="filter-btn" data-filter="islamismo"><i class="fas fa-mosque"></i> Islamismo</button>
                    <button class="filter-btn" data-filter="tradicionais"><i class="fas fa-globe-africa"></i> Tradicionais</button>
                    <button class="filter-btn" data-filter="outras"><i class="fas fa-hands-praying"></i> Outras</button>
                </div>
                <div class="display-options">
                    <select id="sortSelect">
                        <option value="default">Ordenar por Padrão</option>
                        <option value="title">Título (A-Z)</option>
                        <option value="author">Autor (A-Z)</option>
                        <option value="rating">Melhor Avaliação</option>
                    </select>
                    <label class="group-toggle"><input type="checkbox" id="groupByCategory" checked> Agrupar por Categoria</label>
                </div>
            </div>
            
            <div class="loading">A carregar acervo...</div>
            
            <div class="featured-books">
                <h2><i class="fas fa-star"></i> Em Destaque</h2>
                <div class="books-grid"></div>
            </div>

            <div class="books-grid-container">
                <div class="books-grid"></div>
            </div>

        </section>
    </main>
    
    <!-- Modal de Download -->
    <div class="modal" id="downloadModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3><i class="fas fa-download"></i> Confirmar Download</h3>
            <p>Você está prestes a baixar o livro:</p>
            <strong id="bookTitle"></strong>
            <a href="#" id="confirmDownload" class="book-download-btn" download><i class="fas fa-check-circle"></i> Sim, iniciar download</a>
        </div>
    </div>

    <!-- Scripts Centralizados -->
    <script src="menu.js"></script>
    <script src="biblioteca.js"></script>
    <script src="footer.js"></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html>
